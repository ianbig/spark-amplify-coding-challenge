{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport styles from './movie.module.css';\nimport { trackPromise } from 'react-promise-tracker';\n\nvar Movie = /*#__PURE__*/function (_React$Component) {\n  _inherits(Movie, _React$Component);\n\n  var _super = _createSuper(Movie);\n\n  function Movie(props) {\n    var _this;\n\n    _classCallCheck(this, Movie);\n\n    _this = _super.call(this, props); // UNDO: eliminate redundant state\n\n    _this.state = {\n      plot: \"\",\n      poster: \"\",\n      title: \"\",\n      rating: \"\",\n      votes: 0,\n      genre: \"\",\n      actors: \"\",\n      director: \"\",\n      runtime: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(Movie, [{\n    key: \"_OnReady\",\n    value: function _OnReady(response) {\n      return response.json();\n    }\n  }, {\n    key: \"_Error\",\n    value: function _Error() {\n      alert(\"Error in fetching\");\n    }\n  }, {\n    key: \"addDefaultSrc\",\n    value: function addDefaultSrc(event) {\n      event.target.src = \"../error.jpg\";\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var imdbID = sessionStorage.getItem('imdbID');\n      var APIkey = sessionStorage.getItem(\"APIkey\"); // for maintainability\n\n      var url = \"https://www.omdbapi.com/?plot=full&apikey=\" + APIkey + \"&i=\" + imdbID;\n      trackPromise(fetch(url).then(this._OnReady).then(function (json) {\n        //console.log(json);\n        _this2.setState({\n          plot: json['Plot'],\n          poster: json['Poster'],\n          title: json['Title'],\n          rating: json['imdbRating'],\n          votes: json['imdbVotes'],\n          genere: json['Genre'],\n          actors: json['Actors'],\n          director: json['Director'],\n          runtime: json['Runtime']\n        });\n      })[\"catch\"](this._Error));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", {\n        className: styles.container\n      }, __jsx(\"div\", {\n        className: styles.infoContainer\n      }, __jsx(\"div\", {\n        className: styles.flex_container_img\n      }, __jsx(\"img\", {\n        className: styles.imgprop,\n        src: this.state.poster,\n        onError: this.addDefaultSrc\n      })), __jsx(\"div\", {\n        className: styles.flex_container_info\n      }, __jsx(\"div\", {\n        className: styles.flex_item_head\n      }, this.state.title), __jsx(\"div\", {\n        className: styles.flex_item_info\n      }, __jsx(\"span\", null, \"Rating: \", this.state.rating, \" \"), __jsx(\"span\", null, \"IMDB Votes: \", this.state.votes, \" \"), __jsx(\"span\", null, \"Genre: \", this.state.genre), __jsx(\"span\", null, \"Director: \", this.state.director), __jsx(\"span\", null, \"Actors: \", this.state.actors), __jsx(\"span\", null, \"Runtime: \", this.state.runtime)))), __jsx(\"div\", {\n        className: styles.flex_item_plot\n      }, __jsx(\"section\", null, this.state.plot)));\n    }\n  }]);\n\n  return Movie;\n}(React.Component);\n\nexport default Movie;","map":null,"metadata":{},"sourceType":"module"}